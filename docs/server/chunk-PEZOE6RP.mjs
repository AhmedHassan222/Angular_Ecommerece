import './polyfills.server.mjs';
import{a as G}from"./chunk-DXEZGDY4.mjs";import{a as F}from"./chunk-RHRJHLMW.mjs";import"./chunk-J4BDXTMW.mjs";import{a as w,b as _,c as k,d as E,e as T,f as C,h as D,i as N,j as q,l as A}from"./chunk-XZPKZF37.mjs";import{a as x}from"./chunk-KXNUH2E2.mjs";import"./chunk-5E64DTXD.mjs";import{Ea as h,Ka as s,Ma as g,Q as f,Ra as m,T as b,Va as o,Wa as n,Xa as u,ab as v,bb as y,gb as l,ob as S,ta as d}from"./chunk-42RQJQIM.mjs";import"./chunk-VVCT4QZE.mjs";function L(e,c){e&1&&(o(0,"p",15),l(1,"Phone is required"),n())}function I(e,c){e&1&&(o(0,"p",15),l(1,"Access egyption phone only."),n())}function M(e,c){if(e&1&&s(0,L,2,0,"p",15)(1,I,2,0,"p",15),e&2){let i,r,t=y();m(0,(i=t.orderForm().get("phone"))!=null&&i.getError("required")?0:-1),d(),m(1,(r=t.orderForm().get("phone"))!=null&&r.getError("pattern")?1:-1)}}function O(e,c){e&1&&(o(0,"p",15),l(1,"city is required"),n())}function R(e,c){if(e&1&&s(0,O,2,0,"p",15),e&2){let i,r=y();m(0,(i=r.orderForm().get("city"))!=null&&i.getError("required")?0:-1)}}function P(e,c){e&1&&u(0,"i",14)}var Q=(()=>{class e{constructor(){this._ActivatedRoute=f(x),this._OrderService=f(G),this._ToastrService=f(F),this.cartId=h(""),this.isLoading=h(!1),this.orderForm=h(new T({details:new C(null),phone:new C(null,[_.required,_.pattern("^01[0125][0-9]{8}$")]),city:new C(null,[_.required])}))}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:i=>{this.cartId.set(i.get("id"))}})}sendData(){this.isLoading.set(!0),this._OrderService.checkout(this.orderForm().value,this.cartId()).subscribe({next:i=>{i.status==="success"&&window.open(i.session.url,"_self")},complete:()=>{this.isLoading.set(!1)}})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-checkout"]],standalone:!0,features:[S],decls:22,vars:5,consts:[[1,"section","py-4"],[1,"w-custom","mx-auto"],[1,"fs-5","fw-semibold"],[1,"mb-2",3,"ngSubmit","formGroup"],[1,"form-floating","my-3"],["id","details","type","text","placeholder","details","formControlName","Details",1,"form-control","rounded-0","border-gray","px-3","w-100","border","border-1"],["for","details"],["id","phone",1,"form-floating","my-3"],["type","tel","placeholder","Phone","formControlName","phone",1,"form-control","rounded-0","border-gray","px-3","w-100","py-3","border","border-1"],["for","phone"],["id","city",1,"form-floating","my-3"],["type","text","placeholder","City","formControlName","city",1,"form-control","rounded-0","border-gray","px-3","w-100","py-3","border","border-1"],["for","city"],["type","submit",1,"border-0","btn-special","py-3","w-100","rounded-1","my-3","fs-6","fw-normal","text-white",3,"disabled"],[1,"fa-spin","fa-spinner","fa","ms-2"],[1,"text-danger","small","pt-1"]],template:function(r,t){if(r&1&&(o(0,"section",0)(1,"div",1)(2,"h3",2),l(3,"Checkout "),n(),o(4,"form",3),v("ngSubmit",function(){return t.sendData()}),o(5,"div",4),u(6,"textarea",5),o(7,"label",6),l(8,"Details"),n()(),o(9,"div",7),u(10,"input",8),o(11,"label",9),l(12,"Phone"),n(),s(13,M,2,2),n(),o(14,"div",10),u(15,"input",11),o(16,"label",12),l(17,"City"),n(),s(18,R,1,1),n(),o(19,"button",13),l(20," Checkout "),s(21,P,1,0,"i",14),n()()()()),r&2){let a,p;d(4),g("formGroup",t.orderForm()),d(9),m(13,((a=t.orderForm().get("phone"))!=null&&a.touched||(a=t.orderForm().get("phone"))!=null&&a.dirty)&&((a=t.orderForm().get("phone"))!=null&&a.errors)?13:-1),d(5),m(18,((p=t.orderForm().get("city"))!=null&&p.touched||(p=t.orderForm().get("city"))!=null&&p.dirty)&&((p=t.orderForm().get("city"))!=null&&p.errors)?18:-1),d(),g("disabled",t.orderForm().invalid||t.isLoading),d(2),m(21,t.isLoading()?21:-1)}},dependencies:[A,D,w,k,E,N,q]})}}return e})();export{Q as CheckoutComponent};
