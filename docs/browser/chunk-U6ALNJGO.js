import{a as G}from"./chunk-4BVGVPU6.js";import{a as L}from"./chunk-G5KA7DMQ.js";import{c as F,h as y,i as c,j as w,k as T,l as N,m as C,o as q,p as D,q as M,s as A}from"./chunk-Z6AE5OWA.js";import{Ba as h,Ha as p,Ja as E,Oa as m,Sa as n,Ta as l,U as P,Ua as _,W as x,Za as v,_a as g,db as r,eb as b,lb as S,qa as a}from"./chunk-6QD3BH2K.js";function I(e,d){e&1&&(n(0,"p",15),r(1,"Name is required"),l())}function R(e,d){if(e&1&&p(0,I,2,0,"p",15),e&2){let i,o=g();m(0,(i=o.editProfileForm().get("name"))!=null&&i.getError("required")?0:-1)}}function V(e,d){e&1&&(n(0,"p",15),r(1,"Email is required"),l())}function j(e,d){e&1&&(n(0,"p",15),r(1,"Invalid email format"),l())}function k(e,d){if(e&1&&p(0,V,2,0,"p",15)(1,j,2,0,"p",15),e&2){let i,o,t=g();m(0,(i=t.editProfileForm().get("email"))!=null&&i.getError("required")?0:-1),a(),m(1,(o=t.editProfileForm().get("email"))!=null&&o.getError("email")?1:-1)}}function O(e,d){e&1&&(n(0,"p",15),r(1,"Phone is required"),l())}function U(e,d){e&1&&(n(0,"p",15),r(1,"Access egyption phone only."),l())}function $(e,d){if(e&1&&p(0,O,2,0,"p",15)(1,U,2,0,"p",15),e&2){let i,o,t=g();m(0,(i=t.editProfileForm().get("phone"))!=null&&i.getError("required")?0:-1),a(),m(1,(o=t.editProfileForm().get("phone"))!=null&&o.getError("pattern")?1:-1)}}function z(e,d){if(e&1&&(n(0,"p",12),r(1),l()),e&2){let i=g();a(),b(i.errorMessage())}}function B(e,d){e&1&&_(0,"i",14)}var ee=(()=>{class e{constructor(){this._AuthService=P(G),this._Router=P(F),this.errorMessage=h(""),this.isLoading=h(!1),this.editProfileForm=h(new N({name:new C(null,[c.required]),email:new C(null,[c.required,c.email]),phone:new C(null,[c.required,c.pattern("^01[0125][0-9]{8}$")])}))}ngOnInit(){let i=L(localStorage.getItem("token"));this._AuthService.getUserDetails(i.id).subscribe({next:o=>{console.log(o),this.editProfileForm().patchValue({name:o?.data?.name,email:o?.data?.email,phone:o?.data?.phone})}})}sendData(){this.isLoading.set(!0),this._AuthService.updateProfile(this.editProfileForm().value).subscribe({next:i=>{i.message==="success"&&this._Router.navigate(["/profile"])},error:i=>{this.errorMessage=i?.error?.errors?.msg},complete:()=>{this.isLoading.set(!0)}})}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-edit-profile"]],standalone:!0,features:[S],decls:24,vars:7,consts:[[1,"section","py-4"],[1,"w-custom","mx-auto"],[1,"fs-5","fw-semibold"],[1,"mb-2",3,"ngSubmit","formGroup"],[1,"form-floating","my-3"],["id","name","type","text","placeholder","Name","formControlName","name",1,"form-control","rounded-0","border-gray","px-3","w-100","py-3","border","border-1"],["for","name"],["id","email","type","text","placeholder","Email","formControlName","email",1,"form-control","rounded-0","border-gray","px-3","w-100","py-3","border","border-1"],["for","email"],["id","phone",1,"form-floating","my-3"],["type","tel","placeholder","Phone","formControlName","phone",1,"form-control","rounded-0","border-gray","px-3","w-100","py-3","border","border-1"],["for","phone"],[1,"fs-6","text-danger"],["type","submit",1,"border-0","btn-special","py-3","w-100","rounded-1","mt-2","fs-6","fw-normal","text-white",3,"disabled"],[1,"fa-spin","fa-spinner","fa","ms-2"],[1,"text-danger","small","pt-1"]],template:function(o,t){if(o&1&&(n(0,"section",0)(1,"div",1)(2,"h3",2),r(3,"Edit Profile"),l(),n(4,"form",3),v("ngSubmit",function(){return t.sendData()}),n(5,"div",4),_(6,"input",5),n(7,"label",6),r(8,"Name"),l(),p(9,R,1,1),l(),n(10,"div",4),_(11,"input",7),n(12,"label",8),r(13,"email"),l(),p(14,k,2,2),l(),n(15,"div",9),_(16,"input",10),n(17,"label",11),r(18,"Phone"),l(),p(19,$,2,2),l(),p(20,z,2,1,"p",12),n(21,"button",13),r(22," Save "),p(23,B,1,0,"i",14),l()()()()),o&2){let u,f,s;a(4),E("formGroup",t.editProfileForm()),a(5),m(9,((u=t.editProfileForm().get("name"))!=null&&u.touched||(u=t.editProfileForm().get("name"))!=null&&u.dirty)&&((u=t.editProfileForm().get("name"))!=null&&u.errors)?9:-1),a(5),m(14,((f=t.editProfileForm().get("email"))!=null&&f.touched||(f=t.editProfileForm().get("email"))!=null&&f.dirty)&&((f=t.editProfileForm().get("email"))!=null&&f.errors)?14:-1),a(5),m(19,((s=t.editProfileForm().get("phone"))!=null&&s.touched||(s=t.editProfileForm().get("phone"))!=null&&s.dirty)&&((s=t.editProfileForm().get("phone"))!=null&&s.errors)?19:-1),a(),m(20,t.errorMessage()?20:-1),a(),E("disabled",t.editProfileForm().invalid||t.isLoading),a(2),m(23,t.isLoading()?23:-1)}},dependencies:[A,q,y,w,T,D,M]})}}return e})();export{ee as EditProfileComponent};
